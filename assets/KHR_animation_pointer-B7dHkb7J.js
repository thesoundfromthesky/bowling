import{q as e,C as P,L as x,u as p,r as L}from"./index-UsGQmXg2.js";import{n as M,A as f}from"./glTFLoaderAnimation-zEXIGONm.js";import{G as w}from"./gltfPathToObjectConverter-CGviXP77.js";function u(a,r,s,o){return P.FromArray(r,s).scale(o)}function E(a,r,s,o){return r[s+3]*o}function n(a,r,s,o){return r[s]*o}function N(a,r,s,o){return-r[s]*o}function m(a,r,s,o){return r[s+1]*o}function d(a,r,s,o){return r[s]*o*2}function i(a){return{scale:[new t(e.ANIMATIONTYPE_FLOAT,`${a}.uScale`,n,()=>2),new t(e.ANIMATIONTYPE_FLOAT,`${a}.vScale`,m,()=>2)],offset:[new t(e.ANIMATIONTYPE_FLOAT,`${a}.uOffset`,n,()=>2),new t(e.ANIMATIONTYPE_FLOAT,`${a}.vOffset`,m,()=>2)],rotation:[new t(e.ANIMATIONTYPE_FLOAT,`${a}.wAng`,N,()=>1)]}}class _ extends f{buildAnimations(r,s,o,T,A){A(r._babylonCamera,this._buildAnimation(s,o,T))}}class t extends f{buildAnimations(r,s,o,T,A){for(const l in r._data)A(r._data[l].babylonMaterial,this._buildAnimation(s,o,T))}}class c extends f{buildAnimations(r,s,o,T,A){A(r._babylonLight,this._buildAnimation(s,o,T))}}const R={__array__:{__target__:!0,...M}},Y={__array__:{__target__:!0,orthographic:{xmag:[new _(e.ANIMATIONTYPE_FLOAT,"orthoLeft",N,()=>1),new _(e.ANIMATIONTYPE_FLOAT,"orthoRight",m,()=>1)],ymag:[new _(e.ANIMATIONTYPE_FLOAT,"orthoBottom",N,()=>1),new _(e.ANIMATIONTYPE_FLOAT,"orthoTop",m,()=>1)],zfar:[new _(e.ANIMATIONTYPE_FLOAT,"maxZ",n,()=>1)],znear:[new _(e.ANIMATIONTYPE_FLOAT,"minZ",n,()=>1)]},perspective:{yfov:[new _(e.ANIMATIONTYPE_FLOAT,"fov",n,()=>1)],zfar:[new _(e.ANIMATIONTYPE_FLOAT,"maxZ",n,()=>1)],znear:[new _(e.ANIMATIONTYPE_FLOAT,"minZ",n,()=>1)]}}},C={__array__:{__target__:!0,pbrMetallicRoughness:{baseColorFactor:[new t(e.ANIMATIONTYPE_COLOR3,"albedoColor",u,()=>4),new t(e.ANIMATIONTYPE_FLOAT,"alpha",E,()=>4)],metallicFactor:[new t(e.ANIMATIONTYPE_FLOAT,"metallic",n,()=>1)],roughnessFactor:[new t(e.ANIMATIONTYPE_FLOAT,"roughness",n,()=>1)],baseColorTexture:{extensions:{KHR_texture_transform:i("albedoTexture")}},metallicRoughnessTexture:{extensions:{KHR_texture_transform:i("metallicTexture")}}},emissiveFactor:[new t(e.ANIMATIONTYPE_COLOR3,"emissiveColor",u,()=>3)],normalTexture:{scale:[new t(e.ANIMATIONTYPE_FLOAT,"bumpTexture.level",n,()=>1)],extensions:{KHR_texture_transform:i("bumpTexture")}},occlusionTexture:{strength:[new t(e.ANIMATIONTYPE_FLOAT,"ambientTextureStrength",n,()=>1)],extensions:{KHR_texture_transform:i("ambientTexture")}},emissiveTexture:{extensions:{KHR_texture_transform:i("emissiveTexture")}},extensions:{KHR_materials_anisotropy:{anisotropyStrength:[new t(e.ANIMATIONTYPE_FLOAT,"anisotropy.intensity",n,()=>1)],anisotropyRotation:[new t(e.ANIMATIONTYPE_FLOAT,"anisotropy.angle",n,()=>1)],anisotropyTexture:{extensions:{KHR_texture_transform:i("anisotropy.texture")}}},KHR_materials_clearcoat:{clearcoatFactor:[new t(e.ANIMATIONTYPE_FLOAT,"clearCoat.intensity",n,()=>1)],clearcoatRoughnessFactor:[new t(e.ANIMATIONTYPE_FLOAT,"clearCoat.roughness",n,()=>1)],clearcoatTexture:{extensions:{KHR_texture_transform:i("clearCoat.texture")}},clearcoatNormalTexture:{scale:[new t(e.ANIMATIONTYPE_FLOAT,"clearCoat.bumpTexture.level",n,()=>1)],extensions:{KHR_texture_transform:i("clearCoat.bumpTexture")}},clearcoatRoughnessTexture:{extensions:{KHR_texture_transform:i("clearCoat.textureRoughness")}}},KHR_materials_dispersion:{dispersion:[new t(e.ANIMATIONTYPE_FLOAT,"subSurface.dispersion",n,()=>1)]},KHR_materials_emissive_strength:{emissiveStrength:[new t(e.ANIMATIONTYPE_FLOAT,"emissiveIntensity",n,()=>1)]},KHR_materials_ior:{ior:[new t(e.ANIMATIONTYPE_FLOAT,"indexOfRefraction",n,()=>1)]},KHR_materials_iridescence:{iridescenceFactor:[new t(e.ANIMATIONTYPE_FLOAT,"iridescence.intensity",n,()=>1)],iridescenceIor:[new t(e.ANIMATIONTYPE_FLOAT,"iridescence.indexOfRefraction",n,()=>1)],iridescenceThicknessMinimum:[new t(e.ANIMATIONTYPE_FLOAT,"iridescence.minimumThickness",n,()=>1)],iridescenceThicknessMaximum:[new t(e.ANIMATIONTYPE_FLOAT,"iridescence.maximumThickness",n,()=>1)],iridescenceTexture:{extensions:{KHR_texture_transform:i("iridescence.texture")}},iridescenceThicknessTexture:{extensions:{KHR_texture_transform:i("iridescence.thicknessTexture")}}},KHR_materials_sheen:{sheenColorFactor:[new t(e.ANIMATIONTYPE_COLOR3,"sheen.color",u,()=>3)],sheenRoughnessFactor:[new t(e.ANIMATIONTYPE_FLOAT,"sheen.roughness",n,()=>1)],sheenColorTexture:{extensions:{KHR_texture_transform:i("sheen.texture")}},sheenRoughnessTexture:{extensions:{KHR_texture_transform:i("sheen.textureRoughness")}}},KHR_materials_specular:{specularFactor:[new t(e.ANIMATIONTYPE_FLOAT,"metallicF0Factor",n,()=>1)],specularColorFactor:[new t(e.ANIMATIONTYPE_COLOR3,"metallicReflectanceColor",u,()=>3)],specularTexture:{extensions:{KHR_texture_transform:i("metallicReflectanceTexture")}},specularColorTexture:{extensions:{KHR_texture_transform:i("reflectanceTexture")}}},KHR_materials_transmission:{transmissionFactor:[new t(e.ANIMATIONTYPE_FLOAT,"subSurface.refractionIntensity",n,()=>1)],transmissionTexture:{extensions:{KHR_texture_transform:i("subSurface.refractionIntensityTexture")}}},KHR_materials_volume:{attenuationColor:[new t(e.ANIMATIONTYPE_COLOR3,"subSurface.tintColor",u,()=>3)],attenuationDistance:[new t(e.ANIMATIONTYPE_FLOAT,"subSurface.tintColorAtDistance",n,()=>1)],thicknessFactor:[new t(e.ANIMATIONTYPE_FLOAT,"subSurface.maximumThickness",n,()=>1)],thicknessTexture:{extensions:{KHR_texture_transform:i("subSurface.thicknessTexture")}}},KHR_materials_diffuse_transmission:{diffuseTransmissionFactor:[new t(e.ANIMATIONTYPE_FLOAT,"subSurface.translucencyIntensity",n,()=>1)],diffuseTransmissionTexture:{extensions:{KHR_texture_transform:i("subSurface.translucencyIntensityTexture")}},diffuseTransmissionColorFactor:[new t(e.ANIMATIONTYPE_COLOR3,"subSurface.translucencyColor",u,()=>3)],diffuseTransmissionColorTexture:{extensions:{KHR_texture_transform:i("subSurface.translucencyColorTexture")}}}}}},b={KHR_lights_punctual:{lights:{__array__:{__target__:!0,color:[new c(e.ANIMATIONTYPE_COLOR3,"diffuse",u,()=>3)],intensity:[new c(e.ANIMATIONTYPE_FLOAT,"intensity",n,()=>1)],range:[new c(e.ANIMATIONTYPE_FLOAT,"range",n,()=>1)],spot:{innerConeAngle:[new c(e.ANIMATIONTYPE_FLOAT,"innerAngle",d,()=>1)],outerConeAngle:[new c(e.ANIMATIONTYPE_FLOAT,"angle",d,()=>1)]}}}},EXT_lights_ies:{lights:{__array__:{__target__:!0,color:[new c(e.ANIMATIONTYPE_COLOR3,"diffuse",u,()=>3)],multiplier:[new c(e.ANIMATIONTYPE_FLOAT,"intensity",n,()=>1)]}}}},y={nodes:R,materials:C,cameras:Y,extensions:b},O="KHR_animation_pointer";class H extends w{constructor(r){super(r,y)}}class K{constructor(r){this.name=O,this._loader=r,this._pathToObjectConverter=new H(this._loader.gltf)}get enabled(){return this._loader.isExtensionUsed(O)}dispose(){this._loader=null,delete this._pathToObjectConverter}_loadAnimationChannelAsync(r,s,o,T,A){var g;const l=(g=T.target.extensions)==null?void 0:g.KHR_animation_pointer;if(!l||!this._pathToObjectConverter)return null;T.target.path!=="pointer"&&x.Warn(`${r}/target/path: Value (${T.target.path}) must be (pointer) when using the ${this.name} extension`),T.target.node!=null&&x.Warn(`${r}/target/node: Value (${T.target.node}) must not be present when using the ${this.name} extension`);const h=`${r}/extensions/${this.name}`,I=l.pointer;if(!I)throw new Error(`${h}: Pointer is missing`);try{const F=this._pathToObjectConverter.convert(I);return this._loader._loadAnimationChannelFromTargetInfoAsync(r,s,o,T,F,A)}catch{return x.Warn(`${h}/pointer: Invalid pointer (${I}) skipped`),null}}}p(O);L(O,!0,a=>new K(a));export{K as KHR_animation_pointer};
